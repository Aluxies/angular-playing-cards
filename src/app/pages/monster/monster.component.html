<div class="preview">
    <app-playing-card [monster]="monster"></app-playing-card>
</div>

<div class="main">
    <form [formGroup]="formGroup" (submit)="submit($event)" action="">
        <div class="form-field">
            <label for="name">Name</label>
            <input type="text" name="name" id="name" formControlName="name"/>
            @if (isFieldValid('name')) {
                <div class="error">This field is required</div>
            }
        </div>
        <div class="form-field">
            <label for="image">Image</label>
            <input type="file" name="image" id="image" (change)="onFileChange($event)"/>
            @if (isFieldValid('image')) {
                <div class="error">This field is required</div>
            }
        </div>
        <div class="form-field">
            <label for="type">Type</label>
            <select name="type" id="type" formControlName="type">
                @for (type of monsterTypes; track type) {
                    <option [value]="type">{{type}}</option>
                }
            </select>
            @if (isFieldValid('type')) {
                <div class="error">This field is required</div>
            }
        </div>
        <div class="form-field">
            <label for="hp">HP</label>
            <input type="number" name="hp" id="hp" formControlName="hp"/>
            @if (isFieldValid('hp')) {
                @if (formGroup.get('hp')?.hasError('required')) {
                    <div class="error">This field is required</div>
                }
                @if (formGroup.get('hp')?.hasError('min')) {
                    <div class="error">This field must be greater than 0</div>
                }
                @if (formGroup.get('hp')?.hasError('max')) {
                    <div class="error">This field must be smaller or equal to 200</div>
                }
            }
        </div>
        <div class="form-field">
            <label for="figureCaption">Figure caption</label>
            <input type="text" name="figureCaption" id="figureCaption" formControlName="figureCaption"/>
            @if (isFieldValid('figureCaption')) {
                <div class="error">This field is required</div>
            }
        </div>
        <div class="form-field">
            <label for="attackName">Attack name</label>
            <input type="text" name="attackName" id="attackName" formControlName="attackName"/>
            @if (isFieldValid('attackName')) {
                <div class="error">This field is required</div>
            }
        </div>
        <div class="form-field">
            <label for="attackStrength">Attack strength</label>
            <input type="number" name="attackStrength" id="attackStrength" formControlName="attackStrength"/>
            @if (isFieldValid('attackStrength')) {
                @if (formGroup.get('attackStrength')?.hasError('required')) {
                    <div class="error">This field is required</div>
                }
                @if (formGroup.get('attackStrength')?.hasError('min')) {
                    <div class="error">This field must be greater than 0</div>
                }
                @if (formGroup.get('attackStrength')?.hasError('max')) {
                    <div class="error">This field must be smaller or equal to 200</div>
                }
            }
        </div>
        <div class="form-field">
            <label for="attackDescription">Attack description</label>
            <input type="text" name="attackDescription" id="attackDescription" formControlName="attackDescription"/>
            @if (isFieldValid('attackDescription')) {
                <div class="error">This field is required</div>
            }
        </div>
        <div class="button-container">
            <button (click)="navigateBack()">Back</button>
            <button type="submit" [disabled]="formGroup.invalid">Save</button>
        </div>
    </form>
</div>
